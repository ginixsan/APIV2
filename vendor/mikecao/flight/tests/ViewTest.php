<?php
require_once 'vendor/autoload.php'; require_once __DIR__ . '/../flight/autoload.php'; class ViewTest extends PHPUnit_Framework_TestCase { private $view; function setUp() { $this->view = new \flight\template\View(); $this->view->path = __DIR__ . '/views'; } function testVariables() { $this->view->set('test', 123); $this->assertEquals(123, $this->view->get('test')); $this->assertTrue($this->view->has('test')); $this->assertTrue(!$this->view->has('unknown')); $this->view->clear('test'); $this->assertEquals(null, $this->view->get('test')); } function testTemplateExists() { $this->assertTrue($this->view->exists('hello.php')); $this->assertTrue(!$this->view->exists('unknown.php')); } function testRender() { $this->view->render('hello', array('name' => 'Bob')); $this->expectOutputString('Hello, Bob!'); } function testFetch() { $spb46e21 = $this->view->fetch('hello', array('name' => 'Bob')); $this->assertEquals('Hello, Bob!', $spb46e21); } function testTemplateWithExtension() { $this->view->set('name', 'Bob'); $this->view->render('hello.php'); $this->expectOutputString('Hello, Bob!'); } function testTemplateWithCustomExtension() { $this->view->set('name', 'Bob'); $this->view->extension = '.html'; $this->view->render('world'); $this->expectOutputString('Hello world, Bob!'); } }