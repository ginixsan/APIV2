<?php
require_once 'vendor/autoload.php'; require_once __DIR__ . '/../flight/autoload.php'; class FilterTest extends PHPUnit_Framework_TestCase { private $app; function setUp() { $this->app = new \flight\Engine(); } function testBeforeAndAfter() { $this->app->map('hello', function ($spbc60b1) { return "Hello, {$spbc60b1}!"; }); $this->app->before('hello', function (&$spfbee46, &$spb46e21) { $spfbee46[0] = 'Fred'; }); $this->app->after('hello', function (&$spfbee46, &$spb46e21) { $spb46e21 .= ' Have a nice day!'; }); $sp38622e = $this->app->hello('Bob'); $this->assertEquals('Hello, Fred! Have a nice day!', $sp38622e); } function testFilterChaining() { $this->app->map('bye', function ($spbc60b1) { return "Bye, {$spbc60b1}!"; }); $this->app->before('bye', function (&$spfbee46, &$spb46e21) { $spfbee46[0] = 'Bob'; }); $this->app->before('bye', function (&$spfbee46, &$spb46e21) { $spfbee46[0] = 'Fred'; return false; }); $this->app->before('bye', function (&$spfbee46, &$spb46e21) { $spfbee46[0] = 'Ted'; }); $sp38622e = $this->app->bye('Joe'); $this->assertEquals('Bye, Fred!', $sp38622e); } }